---
title: "Setup Your Controllers"
category: "Getting Started"
type: "documentation"
version: "0.1"
---

# Setup Your Controllers
Since your Edge Compute Network is likely distributed—composed of many different devices across networks, each with potentially differing microservices—another piece of software called the **Controller** is used for orchestration of the different [Agents](agent-overview).

Because the Controller daemon keeps track of all your Agents automatically, even across complicated network configurations, you can use it to maintain the entire fleet, remotely. Small Edge Compute Networks will only need a single Controller, however, running multiple Controllers is also supported for increased resiliency.

### Minimum Requirements

The Controller daemon runs on nearly any device.

- Processor: x86-64, Dual Core or better
- RAM: 2 GB minimum
- Hard Disk: 10 GB minimum
- Ubuntu, macOS Sierra, or Windows

## Automatic Setup (recommended)
Installing the daemon requires using sudo to access root privileges.

```bash
sudo curl -sSf https://iofog.org/controller-install.sh | sh
```

This will do the work of installing the Controller software and all of its dependencies.

***

## Manual Setup (alternative)
If for any reason you'd prefer to set things up manually, you can install the necessary dependencies first, then the Controller software.

### Install Dependencies
#### Node.js and NPM
The Controller software runs on Node.js, which is a JavaScript runtime built on Chrome's V8 JavaScript engine.

There are a number of ways of installing Node.js and NPM.

- [Website download](https://nodejs.org/en/download/)
- [With a Package Manager](https://nodejs.org/en/download/package-manager/) e.g. apt-get
- [Using NVM](https://github.com/creationix/nvm#install-script) the Node Version Manager

### Install Controller Daemon
Installing the daemon requires root privileges.

```bash
sudo npm install -g --unsafe-perm iofogcontroller
# or developer's version
sudo npm install -g --unsafe-perm @iofog/fog-controller
```

## Setup Your Users
Since the Controller can be accessed via REST calls to remotely control your ioFog network, you'll need to setup at least one user for remote authentication.

```bash
sudo fog-controller user -add <email> <firstName> <lastName> <password>
# e.g. sudo fog-controller user -add john@example.com John Doe mysecurepassword
```

## Start The Controller
```bash
sudo fog-controller start
```

## Configure

### Create Fog
```bash
curl http://localhost:54421/api/v2/instance/create/type/:type?t=:userAccessToken
```

where `:type` is FogType, which can be 1 for Standard Linux (x86) OR 2 for ARM Linux, and `:userAccessToken` is obtained by creating user.

### Fog provisioning
```bash
curl http://localhost:54421/api/v2/authoring/fog/provisioningkey/instanceid/:instanceId
```

where `:instanceId` is obtained by the instance creation in the previous step.

The provision key generated by this endpoint will be used by ioFog for provisioning.

### Create fog access token
```bash
curl http://localhost:54421/api/v2/instance/provision/key/:provisionKey/fogtype/:fogType
```

where `:provisionKey` is obtained by provisioning in the previous step and `:fogType` is a FogType (1 for Standard Linux (x86) OR 2 for ARM Linux).

## SSL Certificates
When not running in developer mode, the Controller requires a valid SSL certificate.

Ideally, certificates would be signed by a Certificate Authority, but because Certificate Authorities require a public domain name, self-signed certificates are accepted too and are in fact the most commonly used with ioFog.

The same certificates need to installed and configured on all your Agents, Controllers, and Connectors, so that connections between them are trusted.

### Ubuntu
```bash
sudo cp path/to/custom-certificate.crt /usr/local/share/ca-certificates/
sudo update-ca-certificates
```

### CentOS
```bash
yum install ca-certificates
update-ca-trust force-enable
cp path/to/custom-certificate.crt /etc/pki/ca-trust/source/anchors/
update-ca-trust extract
```